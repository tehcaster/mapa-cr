<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Chytrá mapa</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2&display=swap" rel="stylesheet">
  <style>
      body, select, input{
          font-family: "Baloo Bhaijaan 2", cursive;
      }
      .vycentruj {
        margin: auto;
        width: 600px;
        padding: 10px;
      }
      #odpoved{
          color: gray;
      }
  </style>
        <script>
            function nastavitJas() {
                let _jas = document.querySelector("#jas_slider").value;

                console.log("Jas: " + _jas);

                let url = "/cfg_set?jas=" + _jas;

                console.log("Načítám URL: " + url);
                fetch(url)
                    .then(response => response.text())
                    .then(data => {
                        let zprava = "<b>Odpověď mapy:</b> " + data
                        document.querySelector("#odpoved").innerHTML = zprava; 

                    })
                    .catch(error => console.error(error));
            }

            function nastavitRezim() {
                let _rezim = document.querySelector("#rezim").value;

                console.log("Rezim: " + _rezim);

                let url = "/cfg_set?rezim=" + _rezim;

                console.log("Načítám URL: " + url);
                fetch(url)
                    .then(response => response.text())
                    .then(data => {
                        let zprava = "<b>Odpověď mapy:</b> " + data
                        document.querySelector("#odpoved").innerHTML = zprava; 

                    })
                    .catch(error => console.error(error));
            }

            window.onload = function(e) {
              var jas_slider = document.getElementById("jas_slider");
              var jas_text = document.getElementById("jas_text");

              jas_slider.oninput = function() {
                jas_text.value = this.value;
              }
              jas_text.oninput = function() {
                jas_slider.value = this.value;
              }
            fetch("/cfg_get?co=jas")
              .then(response => response.text())
              .then(data => {
                jas_slider.value = data;
                jas_text.value = data;
              })
              .catch(error => console.error(error));
            }
        </script>
</head>
<body>
  <div class="vycentruj">
    <h1>Chytrá mapa ČR</h1>
    <p>
      <b>Režim:</b>&nbsp;<select id="rezim" name="rezim">
          <option value="0">Meteoradar</option>
          <option value="1">Teplota</option>
        </select>
        <input type="button" value="Nastavit" onclick="javascript:nastavitRezim()"/>
    </p>
    <p>
      <b>Jas:</b>&nbsp;<input id="jas_text" name="jas_text" size="3" min="0" max="100" value="5"/>
      <input type="range" id="jas_slider" name="jas_slider" min="0" max="100" value="5"/>
      <input type="button" value="Nastavit" onclick="javascript:nastavitJas()"/>
    </p>
    <p id="odpoved"></p>
  </div>
</body>
</html>

